@model JobListingSite.Web.Models.Company.JobApplicationsViewModel
@using JobListingSite.Data.Enums

@foreach (var application in Model.Applications)
{
    <div class="card mb-3 p-3">
        <p><strong>Applicant:</strong> @application.ApplicantName</p>
        <p><strong>Email:</strong> @application.ApplicantEmail</p>

        <!-- 🔵 Status Badge -->
        <span class="badge @GetBadgeClass(application.Status)">
            @application.Status
        </span>

        <!-- ✅ Approve / ❌ Reject Buttons -->
        <form asp-action="UpdateApplicationStatus" method="post" class="d-inline">
            <input type="hidden" name="applicationId" value="@application.Id" />
            <input type="hidden" name="status" value="Approved" />
            <button type="submit" class="btn btn-outline-success btn-sm">Approve</button>
        </form>

        <form asp-action="UpdateApplicationStatus" method="post" class="d-inline">
            <input type="hidden" name="applicationId" value="@application.Id" />
            <input type="hidden" name="status" value="Rejected" />
            <button type="submit" class="btn btn-outline-danger btn-sm">Reject</button>
        </form>
    </div>
}

@functions {
    public string GetBadgeClass(ApplicationStatus status)
    {
        return status switch
        {
            ApplicationStatus.Pending => "bg-warning text-dark",
            ApplicationStatus.Approved => "bg-success",
            ApplicationStatus.Rejected => "bg-danger",
            _ => "bg-secondary"
        };
    }
}
